{"version":3,"sources":["uni-app:///main.js","webpack:///D:/project/mini-app/owner/pages/vote/item.vue?36d2","webpack:///D:/project/mini-app/owner/pages/vote/item.vue?6050","webpack:///D:/project/mini-app/owner/pages/vote/item.vue?3e4d","webpack:///D:/project/mini-app/owner/pages/vote/item.vue?0f2c","uni-app:///pages/vote/item.vue","webpack:///D:/project/mini-app/owner/pages/vote/item.vue?e3c9","webpack:///D:/project/mini-app/owner/pages/vote/item.vue?3e21"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","em","playerList","item","page","limit","totalPage","pid","content","keywords","isVote","liuLiang","components","countdown","playerCard","methods","saveMsg","uni","title","icon","getItemDtail","url","handler","getPlayerList","community_code","sort","project_id","loadMore","accept","turnPage","onLoad","onShow","onBackPress"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACoL;AACpL,gBAAgB,2LAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAsrB,CAAgB,orBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCuD1sB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;IACAC;EACA;EACAC;IACAC;MACA;QACA;MACA;QACAC;UACAC;UACAC;QACA;MACA;IACA;IACAC;MAAA;MACA;QACAC;QACArB;UACAsB;QACA;MACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QAEA;UACA;QACA;UACA;QACA;UACA;YACA;UACA;YACA;UACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAF;QACArB;UACAI;UACAC;UACAmB;UACAF;UACAG;UACAC;QACA;MACA;QACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAN;QACArB;UACAI;UACAC;UACAmB;UACAF;UACAG;UACAC;QACA;MACA;QACA;QACA;MACA;IACA;IACAE;MACA;MACA;IACA;IACAC;MAAA;MACA;QACAR;QACArB;UACAI;UACAC;UACAmB;UACAF;UACAG;UACAC;QACA;MACA;QACA;QACA;MACA;IACA;EACA;EACAI;IACA;IACA;IACA;IACA;EAEA;EACAC;IACA;EACA;EACAC;IAQArC;MACA0B;IACA;IAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACpMA;AAAA;AAAA;AAAA;AAA6zC,CAAgB,mvCAAG,EAAC,C;;;;;;;;;;;ACAj1C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/vote/item.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/vote/item.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./item.vue?vue&type=template&id=3737c2ef&scoped=true&\"\nvar renderjs\nimport script from \"./item.vue?vue&type=script&lang=js&\"\nexport * from \"./item.vue?vue&type=script&lang=js&\"\nimport style0 from \"./item.vue?vue&type=style&index=0&id=3737c2ef&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3737c2ef\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/vote/item.vue\"\nexport default component.exports","export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./item.vue?vue&type=template&id=3737c2ef&scoped=true&\"","var components\ntry {\n  components = {\n    countdown: function () {\n      return import(\n        /* webpackChunkName: \"components/countdown/countdown\" */ \"@/components/countdown/countdown.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./item.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"body\">\n    <view class=\"itemDtail\">\n      \n      <view class=\"body-top\">\n        <view class=\"body-top-t\">\n          <countdown bgc=\"#f0fbf6\" :endTime=\"item.end_time\" :startTime=\"item.begin_time\" :Obj=\"em\" />\n        </view>\n      </view>\n\n      <view class=\"body-bton\">\n        <view class=\"body-bton-b\">\n          <view class=\"title\">\n            投票选项\n            <text class=\"text\" v-if=\"isVote\"> 投票已开始 </text>\n            <text class=\"text\" v-else> 投票已结束 </text>\n          </view>\n        </view>\n      </view>\n     \n      <view class=\"playerCard-top\">\n        <view class=\"playerCard-botton\">\n          <playerCard\n            ref=\"touPiao\"\n            :content=\"content\"\n            :playerList=\"playerList\"\n            :liuLiang=\"liuLiang\"\n            :endTime=\"item.end_time\"\n            :type=\"1\"\n            :pid=\"pid\"\n            @reload=\"getPlayerList\"\n            @xiangQing=\"getPlayerList\"\n            :isVote=\"isVote\"\n          />\n        </view>\n      </view>\n      \n\n      <view class=\"rule\">\n        <view class=\"rule0\">\n          <view class=\"rule-top\">投票规则</view>\n          <view class=\"rule-bottom\" v-html=\"content\"></view>\n        </view>\n      </view>\n    </view>\n\n    <view class=\"footer-btn\" v-if=\"isVote\">\n      <button class=\"btn\" @click=\"saveMsg()\">投票</button>\n    </view>\n  </view>\n</template>\n\n<script>\nimport countdown from '@/components/countdown/countdown.vue';\nimport playerCard from '@/components/player-card/player-card';\nexport default {\n  data() {\n    return {\n      em: {},\n      playerList: [],\n      item: [],\n      page: 1,\n      limit: 6,\n      totalPage: 0,\n      pid: 0,\n      content: '',\n      keywords: '',\n      isVote: false,\n      liuLiang: '',\n    };\n  },\n  components: {\n    countdown,\n    playerCard,\n  },\n  methods: {\n    saveMsg() {\n      if(this.playerList.length){\n        this.$refs.touPiao.toVote();\n      }else{\n        uni.showToast({\n          title:\"无投票选项\",\n          icon:\"none\"\n        })\n      }\n    },\n    getItemDtail(id) {\n      this.request({\n        url: '/v1/votes/' + id,\n        data: {\n          handler: 'project',\n        },\n      }).then((res) => {\n        this.item = res.data;\n        // 获取当前10位时间戳\n        let timestamp = new Date().valueOf() / 1000;\n\n        // 开始时间\n        let kaiShi = timestamp - this.item.begin_time;\n        // 结束时间\n        let jieShu = timestamp - this.item.end_time;\n\n        if (kaiShi == 0) {\n          this.isVote = true;\n        } else if (kaiShi < 0) {\n          this.isVote = false;\n        } else if (kaiShi > 0) {\n          if (jieShu >= 0) {\n            this.isVote = false;\n          } else {\n            this.isVote = true;\n          }\n        }\n        this.content = res.data.content;\n      });\n    },\n    getPlayerList(id) {\n      this.page = 1;\n      this.request({\n        url: '/v1/votes',\n        data: {\n          page: this.page,\n          limit: this.limit,\n          community_code: uni.getStorageSync('userInfo').community_code,\n          handler: 'player_list',\n          sort: 'sno',\n          project_id: this.pid,\n        },\n      }).then((res) => {\n        // this.liuLiang = res.data.data.total_view\n        this.playerList = res.data.data;\n        this.totalPage = res.data.total;\n      });\n    },\n    loadMore() {\n      this.page++;\n      this.request({\n        url: '/v1/votes',\n        data: {\n          page: this.page,\n          limit: this.limit,\n          community_code: uni.getStorageSync('userInfo').community_code,\n          handler: 'player_list',\n          sort: 'sno',\n          project_id: this.pid,\n        },\n      }).then((res) => {\n        this.playerList = [...this.playerList, ...res.data.data];\n        this.totalPage = res.data.last_page;\n      });\n    },\n    accept(data) {\n      this.playerList = data.data;\n      this.totalPage = data.total;\n    },\n    turnPage(e) {\n      this.request({\n        url: '/v1/votes',\n        data: {\n          page: e.current,\n          limit: this.limit,\n          community_code: uni.getStorageSync('userInfo').community_code,\n          handler: 'player_list',\n          sort: 'sno',\n          project_id: this.pid,\n        },\n      }).then((res) => {\n        this.playerList = res.data.data.reverse();\n        this.totalPage = res.data.total;\n      });\n    }\n  },\n  onLoad(e) {\n    let em = JSON.parse(decodeURIComponent(e.Item));\n    this.em = em;\n    this.pid = em.id.toString();\n    this.getPlayerList(this.pid);\n\t\n  },\n  onShow() {\n    this.getItemDtail(this.pid);\n  },\n  onBackPress(e) {\n    // #ifdef H5 || APP-PLUS\n    // 这里可以自定义返回逻辑，比如下面跳转其他页面\n    uni.redirectTo({\n      url: './vote',\n    });\n    // #endif\n    // #ifdef MP-WEIXIN\n    wx.redirectTo({\n      url: './vote',\n    });\n    // #endif\n    return true;\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\n.body {\n  background-color: #f5f5f7;\n  height: 100vh;\n  // width: 100vw;\n}\n.itemDtail {\n  // width: 750rpx;\n  // background-color: #F5F5F7;\n  // min-height: calc(750vh - 117rpx);\n  min-height: calc(100vh - 116rpx);\n}\n\n.body-bton-b {\n  width: calc(100vw - 56rpx);\n  margin: 0 auto;\n  // display: flex;\n  // justify-content: space-around;\n  // align-items: center;\n}\n\n.text {\n  color: #f27900;\n  line-height: 100rpx;\n  font-size: 26rpx;\n}\n\n.body-top {\n  width: 750rpx;\n  background-color: #ffffff;\n}\n.body-top-t {\n  width: calc(100vw - 56rpx);\n  margin: 0 auto;\n  padding-bottom: 50rpx;\n}\n\n.playerCard-top {\n  width: 750rpx;\n  background-color: #ffffff;\n  padding: 0rpx 0rpx 36rpx 0rpx;\n}\n\n.playerCard-botton {\n  width: 694rpx;\n  margin: 0 auto;\n  background-color: #ffffff;\n}\n\n.body-bton {\n  width: 750rpx;\n  background-color: #ffffff;\n}\n\n.title {\n  color: #000000e5;\n  font-family: PingFang SC;\n  font-weight: bold;\n  font-size: 34rpx;\n  text-align: left;\n  height: 100rpx;\n  line-height: 100rpx;\n  background-color: #ffffff;\n  margin-top: 20rpx;\n}\n\n.rule {\n  width: 750rpx;\n  background-color: #ffffff;\n  margin-top: 36rpx;\n  background: #f5f5f7;\n}\n.rule0 {\n  width: calc(100vw - 56rpx);\n  margin: 0 auto;\n}\n.rule-top {\n  padding: 15rpx 0rpx;\n  width: calc(100vw - 56rpx);\n  margin: 0 auto;\n  font-size: 28rpx;\n  color: #00000066;\n}\n\n.footer-btn {\n  width: 100vw;\n  height: 112rpx;\n  background-color: #f5f5f7;\n  color: #ffffff;\n  // position: fixed;\n  bottom: 16rpx;\n  // display: flex;\n  // justify-content: center;\n  // align-items: center;\n}\n.btn {\n  color: #fff;\n  // position: fixed;\n  // bottom: 16rpx;\n  background-color: #16bcc7;\n  width: 710rpx;\n  height: 96rpx;\n  color: #ffffff;\n  font-weight: bold;\n  font-size: 34rpx;\n  letter-spacing: 0rpx;\n  text-align: center;\n  margin-top: 16rpx;\n}\n.rule-bottom {\n  color: #00000066;\n  font-size: 28rpx;\n}\n</style>\n","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./item.vue?vue&type=style&index=0&id=3737c2ef&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./item.vue?vue&type=style&index=0&id=3737c2ef&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1707128370899\n      var cssReload = require(\"D:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}